
PROJECT( ExampleProject )
CMAKE_MINIMUM_REQUIRED( VERSION 2.8 )

#put your *.cpp here
Set (PROJECT_SRCS
	main.cpp
)
ADD_EXECUTABLE( ExampleProject ${PROJECT_SRCS} )


##############here starts shark compilation dependent setup##########################

#map default build type to release
IF(NOT CMAKE_BUILD_TYPE)
       SET(CMAKE_BUILD_TYPE "Release")
ENDIF(NOT CMAKE_BUILD_TYPE)
IF((CMAKE_BUILD_TYPE MATCHES "debug") OR (CMAKE_BUILD_TYPE MATCHES "DEBUG"))
	SET(CMAKE_BUILD_TYPE "Debug")
ENDIF((CMAKE_BUILD_TYPE MATCHES "debug") OR (CMAKE_BUILD_TYPE MATCHES "DEBUG"))
IF((CMAKE_BUILD_TYPE MATCHES "release") OR (CMAKE_BUILD_TYPE MATCHES "RELEASE"))
	SET(CMAKE_BUILD_TYPE "Release")
ENDIF((CMAKE_BUILD_TYPE MATCHES "release") OR (CMAKE_BUILD_TYPE MATCHES "RELEASE"))
#enable or disable debugging
IF(CMAKE_BUILD_TYPE MATCHES "Debug")
	ADD_DEFINITIONS(-DDEBUG )
	SET( LINK_LIBRARIES
		@Boost_LIBRARIES@
		@CMAKE_INSTALL_PREFIX@/lib/libshark_debug.a
	)
ENDIF (CMAKE_BUILD_TYPE MATCHES "Debug")
IF(CMAKE_BUILD_TYPE MATCHES "Release")
	ADD_DEFINITIONS(-DNDEBUG )
	ADD_DEFINITIONS(-DBOOST_UBLAS_NDEBUG )
	SET( LINK_LIBRARIES
		@Boost_LIBRARIES@
		@CMAKE_INSTALL_PREFIX@/lib/libshark.a
	)
ENDIF (CMAKE_BUILD_TYPE MATCHES "Release")

#add boost include directory
include_directories ( @Boost_INCLUDE_DIRS@ )

#handle ATLAS
OPTION(OPT_ENABLE_ATLAS "Enable Atlas as Linear Algebra library" @OPT_ENABLE_ATLAS@)
mark_as_advanced(
	OPT_ENABLE_ATLAS
)

IF ( OPT_ENABLE_ATLAS )
	SET(LINK_LIBRARIES
		${LINK_LIBRARIES}
		@CLAPACK_LIBRARY@
		@CBLAS_LIBRARY@
		@ATLAS_LIBRARY@
	)
	ADD_DEFINITIONS( -DSHARK_USE_ATLAS )
	include_directories ( @ATLAS_PATH@/include/ @ATLAS_PATH@/include/atlas/)
ENDIF ( OPT_ENABLE_ATLAS )

#handle GotoBLAS
OPTION(OPT_ENABLE_GOTOBLAS "Enable GOTOBLAS as Linear Algebra library" @OPT_ENABLE_GOTOBLAS@)
mark_as_advanced(
	OPT_ENABLE_GOTOBLAS
)		
	
IF ( OPT_ENABLE_GOTOBLAS )
	SET(LINK_LIBRARIES 
		${LINK_LIBRARIES} 
		@CMAKE_Fortran_IMPLICIT_LINK_LIBRARIES@
		@GOTOBLAS_LIBRARY@ 
	)
	ADD_DEFINITIONS( -DSHARK_USE_GOTOBLAS )
	include_directories ( @GOTOBLAS_PATH@/include/ )
ENDIF ( OPT_ENABLE_GOTOBLAS )

#handle OpenMP
OPTION(OPT_ENABLE_OPENMP "Enable OpenMP" @OPT_ENABLE_OPENMP@)
mark_as_advanced(
	OPT_ENABLE_OPENMP
)		
IF( OPT_ENABLE_OPENMP )
	ADD_DEFINITIONS( -DSHARK_USE_OPENMP )
	set(CMAKE_C_FLAGS "${CMAKE_C_FLAGS} @OpenMP_C_FLAGS@")
	set(CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} @OpenMP_CXX_FLAGS@")
	set(CMAKE_EXE_LINKER_FLAGS "${CMAKE_EXE_LINKER_FLAGS} @OpenMP_EXE_LINKER_FLAGS@")
ENDIF( OPT_ENABLE_OPENMP )
	
#include directories
include_directories (
	@Boost_INCLUDE_DIRS@
	@CMAKE_INSTALL_PREFIX@/include
)
####################here Ends shark dependent setup########################
#Libraries to link
TARGET_LINK_LIBRARIES( ExampleProject ${LINK_LIBRARIES} )
